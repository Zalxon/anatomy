zg.Quiz=function(){this.ui_=null,this.options_=["A","B","C","D"],this.answer_=1},zg.Quiz.prototype.setup=function(i){this.options_=i.options,this.answer_=i.answer},zg.Quiz.prototype.hide=function(i){this.ui_&&this.ui_.remove()},zg.Quiz.prototype.shuffle=function(i){for(var t,e,s=i.length;0!==s;)e=Math.floor(Math.random()*s),s-=1,t=i[s],i[s]=i[e],i[e]=t;return i},zg.Quiz.prototype.show=function(i){if(this.hide(),!o3v.util.isEmpty(i)){var t,e,s=viewer_.contentManager_.metadata_;o3v.util.forEach(i,function(i,s){t=i,e=s});var n=[];for(var e in t.parentIds){var o=s.entities_[e];-1==n.indexOf(o.name)&&n.push(o.name);for(var a in o.childIds){var r=s.entities_[a].name;-1==n.indexOf(r)&&n.push(r)}}for(var e in t.childIds){var r=s.entities_[e].name;-1==n.indexOf(r)&&n.push(r)}n=this.shuffle(n);var h=n.indexOf(t.name);-1!=h&&n.splice(h,1),n=n.slice(0,3),n.push(t.name),n=this.shuffle(n),this.answer_=n.indexOf(t.name),this.options_=n,this.ui_=$("<div id='quizid'><h2>Quiz</h2><p>Select from the following:</p></div>").dialog({dialogClass:"no-titlebar",resizable:!1,width:300,minHeight:50}),this.ui_.dialog("option","position",[100,75]),zg.List(this.options_,{},function(i,t){var e=[];$(".ui-selected",this.uiList_).each(function(){e.push(this.innerHTML)});var s=$(this.ui_).find("#quizanswer");1==e.length&&$.inArray(e[0],this.options_)==this.answer_?(s.addClass("correct"),s.removeClass("wrong"),s.val("Correct")):(s.addClass("wrong"),s.removeClass("correct"),s.val("Incorrect.  "+this.options_[this.answer_]+" is the answer."))}.bind(this),"#quizid"),this.ui_.append("<div><textarea id='quizanswer'></textarea></div>")}};